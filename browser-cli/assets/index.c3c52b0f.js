import{r as l,p as I,u as D,j as y,a as w}from"./vendor.3f94e942.js";const R=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))s(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const o of n.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function u(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(e){if(e.ep)return;e.ep=!0;const n=u(e);fetch(e.href,n)}};R();const A="modulepreload",L={},S="./",c=function(r,u){return!u||u.length===0?r():Promise.all(u.map(s=>{if(s=`${S}${s}`,s in L)return;L[s]=!0;const e=s.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${s}"]${n}`))return;const o=document.createElement("link");if(o.rel=e?"stylesheet":A,e||(o.as="script",o.crossOrigin=""),o.href=s,document.head.appendChild(o),e)return new Promise((i,m)=>{o.addEventListener("load",i),o.addEventListener("error",m)})})).then(()=>r())};function V(t){switch(t){case"../commands/author.ts":return c(()=>import("./author.97390bc4.js"),[]);case"../commands/clear.ts":return c(()=>import("./clear.c6b26b95.js"),[]);case"../commands/counter.ts":return c(()=>import("./counter.9abd7772.js"),["assets/counter.9abd7772.js","assets/delay.2ef41e11.js"]);case"../commands/eval.ts":return c(()=>import("./eval.086e2fb6.js"),[]);case"../commands/github.ts":return c(()=>import("./github.617cb376.js"),[]);case"../commands/help.ts":return c(()=>import("./help.c7b713a0.js"),["assets/help.c7b713a0.js","assets/getEnv.28f61c54.js"]);case"../commands/ping.ts":return c(()=>import("./ping.ba9dd065.js"),["assets/ping.ba9dd065.js","assets/delay.2ef41e11.js"]);case"../commands/uptime.ts":return c(()=>import("./uptime.3973aaad.js"),["assets/uptime.3973aaad.js","assets/getEnv.28f61c54.js"]);default:return new Promise(function(r,u){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(u.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const $={"../commands/author.ts":()=>c(()=>import("./author.97390bc4.js"),[]),"../commands/clear.ts":()=>c(()=>import("./clear.c6b26b95.js"),[]),"../commands/counter.ts":()=>c(()=>import("./counter.9abd7772.js"),["assets/counter.9abd7772.js","assets/delay.2ef41e11.js"]),"../commands/eval.ts":()=>c(()=>import("./eval.086e2fb6.js"),[]),"../commands/github.ts":()=>c(()=>import("./github.617cb376.js"),[]),"../commands/help.ts":()=>c(()=>import("./help.c7b713a0.js"),["assets/help.c7b713a0.js","assets/getEnv.28f61c54.js"]),"../commands/ping.ts":()=>c(()=>import("./ping.ba9dd065.js"),["assets/ping.ba9dd065.js","assets/delay.2ef41e11.js"]),"../commands/uptime.ts":()=>c(()=>import("./uptime.3973aaad.js"),["assets/uptime.3973aaad.js","assets/getEnv.28f61c54.js"])},k=()=>Promise.all(Object.entries($).map(([t])=>{var r;return(r=t.split("/").pop())==null?void 0:r.split(".").slice(0,-1).join(".")}).map(async t=>{const r=await V(`../commands/${t}.ts`);return{name:t,description:r._description_}})),C=Date.now(),T=async()=>({startTime:C,commands:await k()});function N(){return new Worker("./assets/worker.7f84e0e8.js",{type:"module"})}const K="0.0.1",M=t=>{const[r]=l.exports.useState(()=>I(typeof t=="function"?t():t));return D(r),r},q={"/src/commands/author.ts":()=>c(()=>import("./author.97390bc4.js"),[]),"/src/commands/clear.ts":()=>c(()=>import("./clear.c6b26b95.js"),[]),"/src/commands/counter.ts":()=>c(()=>import("./counter.9abd7772.js"),["assets/counter.9abd7772.js","assets/delay.2ef41e11.js"]),"/src/commands/eval.ts":()=>c(()=>import("./eval.086e2fb6.js"),[]),"/src/commands/github.ts":()=>c(()=>import("./github.617cb376.js"),[]),"/src/commands/help.ts":()=>c(()=>import("./help.c7b713a0.js"),["assets/help.c7b713a0.js","assets/getEnv.28f61c54.js"]),"/src/commands/ping.ts":()=>c(()=>import("./ping.ba9dd065.js"),["assets/ping.ba9dd065.js","assets/delay.2ef41e11.js"]),"/src/commands/uptime.ts":()=>c(()=>import("./uptime.3973aaad.js"),["assets/uptime.3973aaad.js","assets/getEnv.28f61c54.js"])},H=()=>{const t=M(()=>({running:!1,output:[`Browser CLI v${K}
`,`Type "help" for start or press "Tab"
`]})),r=e=>{!e||t.output.push(e+(e[e.length-1]==`
`?"":`
`))},u=(e,n=0)=>{let o=[];for(const i of e)i!=null&&(i==null?o.push("null"):typeof i!="object"?o.push(i.toString()):Array.isArray(i)?o.push(`[${i.map(m=>u([m],n+1)).join(", ")}]`):o.push(`{${Object.entries(i).map(([m,_])=>(_=u([_],n+1),`${m}: ${_}`)).join(", ")}}`));return o.join(" ")},s={log(...e){r(u(e))},error(...e){r("Error: "+u(e))},clear(){t.output.splice(0)}};return{running:t.running,output:t.output,clear:s.clear,context:s,runCommand(e,n){if(t.output.push(n+e+`
`),e=e.trim(),!e)return;const[o,...i]=e.split(/\s+/);t.running=!0;const m=[],_=()=>m.splice(0).map(d=>d()),p=new N,b=d=>{d.preventDefault(),(d.ctrlKey&&d.key=="c"||d.metaKey&&d.key=="c")&&_()};document.addEventListener("keydown",b),new Promise(async d=>{p.onmessage=({data:f})=>{const{program:v,args:h}=JSON.parse(f);if(v=="end")return d();s[v](...h)};const a=q[`/src/commands/${o}.ts`];m.push(()=>{p.terminate(),d()}),p.postMessage(JSON.stringify({program:o,args:i,env:await T(),cmd:(a==null?void 0:a.toString())||""}))}).finally(()=>{_(),t.running=!1,document.removeEventListener("keydown",b)})}}},W="_root_1v506_1";var z={root:W};const B=(t,r)=>{l.exports.useEffect(()=>(document.addEventListener(t,r),()=>document.removeEventListener(t,r)))},F="_root_1u99m_1",J="_show_1u99m_5";var O={root:F,show:J};const g=y.exports.jsx,x=y.exports.jsxs,U=y.exports.Fragment,G=()=>{const[t,r]=l.exports.useState(!0);return l.exports.useEffect(()=>{let u=setTimeout(()=>{r(s=>!s)},500);return()=>clearTimeout(u)}),g("span",{className:O.root+" "+(t?O.show:void 0)})},Q="_root_86tds_1";var X={root:Q};const Y=({context:t,onSubmit:r=()=>null})=>{var d;const[u]=l.exports.useState("vic@host ~ "),[s,e]=l.exports.useState(""),[n,o]=l.exports.useState([]),[i,m]=l.exports.useState(void 0),_=typeof i=="number"||!!s.trim()&&s.trim().split(/\s+/).length==1,p=typeof i=="undefined"?s:((d=n[i])==null?void 0:d.name)||s,b=n.length>0&&typeof i=="number",E=n.map(({name:a},f)=>({name:a,index:f})).filter(a=>a.name.indexOf(s)==0);return l.exports.useEffect(()=>{T().then(a=>o(a.commands))},[]),l.exports.useEffect(()=>{m(void 0)},[s]),B("keydown",a=>{a.preventDefault();const{key:f,code:v}=a;if(a.ctrlKey&&f=="l"||a.metaKey&&f=="l"){t.clear();return}switch(f){case"Backspace":e(h=>{const j=h!=p?p:h;return j.substr(0,j.length-1)});break;case"Tab":m(h=>{if(!E.length)return;if(typeof h==null)return 0;const j=E.findIndex(P=>P.index==h);return E[j+1]?E[j+1].index:E[0].index});break;case"Enter":r(s!=p?p:s,u),e("");break;default:f.length==1?e(h=>(s!=p?p:h)+f):console.log(f,v)}}),x(U,{children:[x("pre",{className:X.root,children:[u+p,b?` (${n[i].description})
`:g(G,{})]}),_?g("pre",{children:E.map(a=>a.index==i?`[-${a.name}-]`:`  ${a.name}  `).join(" ")}):null]})},Z=()=>{const t=l.exports.useRef(),r=l.exports.useMemo(()=>({scroll:0,scrollSize:0,height:0}),[]),{running:u,output:s,runCommand:e,context:n}=H();return l.exports.useEffect(()=>{if(!t.current)return;const{scroll:o,scrollSize:i}=r;o>=i&&(t.current.scrollTop=t.current.scrollHeight);const{offsetHeight:_,scrollTop:p,scrollHeight:b}=t.current;r.scroll=p+_,r.scrollSize=b}),l.exports.useEffect(()=>{var i;const o=()=>{if(!t.current)return;const{offsetHeight:m,scrollTop:_}=t.current;r.scroll=m+_};return(i=t.current)==null||i.addEventListener("scroll",o),()=>{var m;return(m=t.current)==null?void 0:m.removeEventListener("scroll",o)}}),x("div",{ref:t,className:z.root,children:[l.exports.createElement("pre",null,...s),u?null:g(Y,{context:n,onSubmit:e})]})},ee=document.getElementById("app");w.exports.render(g(l.exports.StrictMode,{children:g(Z,{})}),ee);
