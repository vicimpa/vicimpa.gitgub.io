import{r as a,p as I,u as O,j as y,a as D}from"./vendor.3f94e942.js";const R=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))e(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&e(c)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}};R();const A="modulepreload",L={},S="./",n=function(r,i){return!i||i.length===0?r():Promise.all(i.map(e=>{if(e=`${S}${e}`,e in L)return;L[e]=!0;const s=e.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${o}`))return;const c=document.createElement("link");if(c.rel=s?"stylesheet":A,s||(c.as="script",c.crossOrigin=""),c.href=e,document.head.appendChild(c),s)return new Promise((u,p)=>{c.addEventListener("load",u),c.addEventListener("error",p)})})).then(()=>r())};function V(t){switch(t){case"../commands/author.ts":return n(()=>import("./author.97390bc4.js"),[]);case"../commands/counter.ts":return n(()=>import("./counter.dcdf7081.js"),["assets/counter.dcdf7081.js","assets/delay.2ef41e11.js"]);case"../commands/eval.ts":return n(()=>import("./eval.086e2fb6.js"),[]);case"../commands/github.ts":return n(()=>import("./github.617cb376.js"),[]);case"../commands/help.ts":return n(()=>import("./help.c7b713a0.js"),["assets/help.c7b713a0.js","assets/getEnv.28f61c54.js"]);case"../commands/ping.ts":return n(()=>import("./ping.ba9dd065.js"),["assets/ping.ba9dd065.js","assets/delay.2ef41e11.js"]);case"../commands/uptime.ts":return n(()=>import("./uptime.3973aaad.js"),["assets/uptime.3973aaad.js","assets/getEnv.28f61c54.js"]);default:return new Promise(function(r,i){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+t)))})}}const k={"../commands/author.ts":()=>n(()=>import("./author.97390bc4.js"),[]),"../commands/counter.ts":()=>n(()=>import("./counter.dcdf7081.js"),["assets/counter.dcdf7081.js","assets/delay.2ef41e11.js"]),"../commands/eval.ts":()=>n(()=>import("./eval.086e2fb6.js"),[]),"../commands/github.ts":()=>n(()=>import("./github.617cb376.js"),[]),"../commands/help.ts":()=>n(()=>import("./help.c7b713a0.js"),["assets/help.c7b713a0.js","assets/getEnv.28f61c54.js"]),"../commands/ping.ts":()=>n(()=>import("./ping.ba9dd065.js"),["assets/ping.ba9dd065.js","assets/delay.2ef41e11.js"]),"../commands/uptime.ts":()=>n(()=>import("./uptime.3973aaad.js"),["assets/uptime.3973aaad.js","assets/getEnv.28f61c54.js"])},$=()=>Promise.all([...Object.entries(k).map(([t])=>{var r;return(r=t.split("/").pop())==null?void 0:r.split(".").slice(0,-1).join(".")}).map(async t=>{const r=await V(`../commands/${t}.ts`);return{name:t,description:r._description_}}),{name:"clear",description:"Clear console"}]),C=Date.now(),w=async()=>({startTime:C,commands:await $()});function N(){return new Worker("./assets/worker.7f84e0e8.js",{type:"module"})}const M="0.0.1",q=t=>{const[r]=a.exports.useState(()=>I(typeof t=="function"?t():t));return O(r),r},H={"/src/commands/author.ts":()=>n(()=>import("./author.97390bc4.js"),[]),"/src/commands/counter.ts":()=>n(()=>import("./counter.dcdf7081.js"),["assets/counter.dcdf7081.js","assets/delay.2ef41e11.js"]),"/src/commands/eval.ts":()=>n(()=>import("./eval.086e2fb6.js"),[]),"/src/commands/github.ts":()=>n(()=>import("./github.617cb376.js"),[]),"/src/commands/help.ts":()=>n(()=>import("./help.c7b713a0.js"),["assets/help.c7b713a0.js","assets/getEnv.28f61c54.js"]),"/src/commands/ping.ts":()=>n(()=>import("./ping.ba9dd065.js"),["assets/ping.ba9dd065.js","assets/delay.2ef41e11.js"]),"/src/commands/uptime.ts":()=>n(()=>import("./uptime.3973aaad.js"),["assets/uptime.3973aaad.js","assets/getEnv.28f61c54.js"])},W=()=>{const t=q(()=>({running:!1,output:[`Browser CLI v${M}
`,`Type "help" for start or press "Tab"
`]})),r=e=>{!e||t.output.push(e+(e[e.length-1]==`
`?"":`
`))},i={log(...e){r(e.join(" "))},error(...e){r("Error: "+e.join(" "))},clear(){t.output.splice(0)}};return{running:t.running,output:t.output,clear:i.clear,context:i,runCommand(e,s){if(t.output.push(s+e+`
`),e=e.trim(),!e)return;const[o,...c]=e.split(/\s+/);switch(o){case"clear":return i.clear();default:{t.running=!0;const u=[],p=()=>u.splice(0).map(m=>m()),f=new N,d=m=>{m.preventDefault(),m.ctrlKey&&m.key=="c"&&p()};document.addEventListener("keydown",d),new Promise(async m=>{f.onmessage=({data:l})=>{const{program:_,args:j}=JSON.parse(l);if(_=="end")return m();i[_](...j)};const E=H[`/src/commands/${o}.ts`];u.push(()=>{f.terminate(),m()}),f.postMessage(JSON.stringify({program:o,args:c,env:await w(),cmd:(E==null?void 0:E.toString())||""}))}).finally(()=>{p(),t.running=!1,document.removeEventListener("keydown",d)})}}}}},z="_root_1v506_1";var B={root:z};const F=(t,r)=>{a.exports.useEffect(()=>(document.addEventListener(t,r),()=>document.removeEventListener(t,r)))},K="_root_1u99m_1",J="_show_1u99m_5";var P={root:K,show:J};const g=y.exports.jsx,x=y.exports.jsxs,U=y.exports.Fragment,G=()=>{const[t,r]=a.exports.useState(!0);return a.exports.useEffect(()=>{let i=setTimeout(()=>{r(e=>!e)},500);return()=>clearTimeout(i)}),g("span",{className:P.root+" "+(t?P.show:void 0)})},Q="_root_86tds_1";var X={root:Q};const Y=({context:t,onSubmit:r=()=>null})=>{var E;const[i]=a.exports.useState("vic@host ~ "),[e,s]=a.exports.useState(""),[o,c]=a.exports.useState([]),[u,p]=a.exports.useState(void 0),f=typeof u=="number"||!!e.trim()&&e.trim().split(/\s+/).length==1,d=typeof u=="undefined"?e:((E=o[u])==null?void 0:E.name)||e,v=o.length>0&&typeof u=="number",m=o.map(({name:l},_)=>({name:l,index:_})).filter(l=>l.name.indexOf(e)==0);return a.exports.useEffect(()=>{w().then(l=>c(l.commands))},[]),a.exports.useEffect(()=>{p(void 0)},[e]),F("keydown",l=>{l.preventDefault();const{key:_,code:j}=l;if(l.ctrlKey&&_=="l"){t.clear();return}switch(_){case"Backspace":s(h=>{const b=h!=d?d:h;return b.substr(0,b.length-1)});break;case"Tab":p(h=>{if(!m.length)return;if(typeof h==null)return 0;const b=m.findIndex(T=>T.index==h);return m[b+1]?m[b+1].index:m[0].index});break;case"Enter":r(e!=d?d:e,i),s("");break;default:_.length==1?s(h=>(e!=d?d:h)+_):console.log(_,j)}}),x(U,{children:[x("pre",{className:X.root,children:[i+d,v?` (${o[u].description})
`:g(G,{})]}),f?g("pre",{children:m.map(l=>l.index==u?`[-${l.name}-]`:`  ${l.name}  `).join(" ")}):null]})},Z=()=>{const t=a.exports.useRef(),r=a.exports.useMemo(()=>({scroll:0,scrollSize:0,height:0}),[]),{running:i,output:e,runCommand:s,context:o}=W();return a.exports.useEffect(()=>{if(!t.current)return;const{scroll:c,scrollSize:u}=r;c>=u&&(t.current.scrollTop=t.current.scrollHeight);const{offsetHeight:f,scrollTop:d,scrollHeight:v}=t.current;r.scroll=d+f,r.scrollSize=v}),a.exports.useEffect(()=>{var u;const c=()=>{if(!t.current)return;const{offsetHeight:p,scrollTop:f}=t.current;r.scroll=p+f};return(u=t.current)==null||u.addEventListener("scroll",c),()=>{var p;return(p=t.current)==null?void 0:p.removeEventListener("scroll",c)}}),x("div",{ref:t,className:B.root,children:[a.exports.createElement("pre",null,...e),i?null:g(Y,{context:o,onSubmit:s})]})},ee=document.getElementById("app");D.exports.render(g(a.exports.StrictMode,{children:g(Z,{})}),ee);
